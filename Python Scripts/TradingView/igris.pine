//@version=4study('Igris', overlay=true)// Input settingsema1 = input(12, type=input.integer, title="EMA1")ema2 = input(26, type=input.integer, title="EMA2")ema3 = input(84, type=input.integer, title="EMA3")ema4 = input(182, type=input.integer, title="EMA4")ema5 = input(10, type=input.integer, title="EMA5")ema6 = input(55, type=input.integer, title="EMA6")ema7 = input(588, type=input.integer, title="EMA6")ema8 = input(1274, type=input.integer, title="EMA6")fast = input(12, type=input.integer, title="Fast")source = input(close, type=input.source, title="Source")slow = input(26, type=input.integer, title="Slow")signal = input(9, type=input.integer, title="Signal")rate = input(5, type=input.integer, title="Rate")bars = input(1, type=input.integer, title="Bars")confluence_level = input(title="Confluence Level", type=input.integer, defval=2, minval=2, maxval=4)// Plotting emasplot(ema(source, ema1), color=#000000, linewidth=1, title="EMA1")plot(ema(source, ema2), color=#ff9800, linewidth=2, title="EMA2")plot(ema(source, ema3), color=#078bf4, linewidth=2, title="EMA3")plot(ema(source, ema4), color=#e60202, linewidth=3, title="EMA4")plot(ema(source, ema5), color=#000000, linewidth=1, title="EMA5")plot(ema(source, ema6), color=#039709, linewidth=2, title="EMA6")plot(ema(source, ema7), color=#faff07, linewidth=2, title="EMA7")plot(ema(source, ema8), color=#faff07, linewidth=2, title="EMA8")// Confluence Zones[macd_line1, signal_line1, hist_line1] = macd(source, fast, slow, signal)[macd_line2, signal_line2, hist_line2] = macd(source, fast*rate, slow*rate, signal*rate)is_bullish = rising(hist_line1, bars) and rising(hist_line2, bars)is_bearish = falling(hist_line1, bars) and falling(hist_line2, bars)if confluence_level >= 3     [macd_line3, signal_line3, hist_line3] = macd(source, fast*rate*rate, slow*rate*rate, signal*rate*rate)    is_bullish := is_bullish and rising(hist_line3, bars)    is_bearish := is_bearish and falling(hist_line3, bars)if confluence_level == 4    [macd_line4, signal_line4, hist_line4] = macd(source, fast*rate*rate*rate, slow*rate*rate*rate, signal*rate*rate*rate)    is_bullish := is_bullish and rising(hist_line4, bars)    is_bearish := is_bearish and falling(hist_line4, bars)alertcondition(is_bullish, title='Bullish  Momemtum Confluence', message='Buy!')alertcondition(is_bearish, title='Bearish  Momemtum Confluence', message='Sell!')background_color = if is_bearish    color.new(#df0808, 50)else if is_bullish    color.new(#09f613, 32)else    na    bgcolor(background_color,  title="Confluence Zones")[heikinashi_open, heikinashi_close] = security(heikinashi(syminfo.tickerid), timeframe.period, [open, close])alertcondition(heikinashi_close > heikinashi_open, title='Bullish Heikin Ashi', message='Buying!')alertcondition(heikinashi_close < heikinashi_open, title='Bearish Heikin Ashi', message='Selling!')// Plotting BoldCandlestickplotcandle(high, high, low, low, color=#000000, title="BoldCandlestick")